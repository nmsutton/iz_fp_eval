#!/bin/bash
# Batch script to test IM params
# Reference: https://superuser.com/questions/944420/extract-each-digit-of-variable-and-store-as-new-variable-in-bash
# https://linuxize.com/post/bash-increment-decrement-variable/

# C
p1=(118 367 762 113 342 595 756 224 497 639 795 227 428 122 437 530 272 192 118 141);
# k
p2=(0.618438091676562 2.54893459849011 2.64877892622763 3.27505463999959 3.23857220045896 1.15572811793339 0.771629050172176 4.33917416016627 3.38791052289041 4.24892575831325 3.43440155235413 1.21451529294865 2.04779049691647 0.940698780380287 1.89533561869926 4.14028966835298 5.19199139723503 0.526880345013730 0.618438091676562 0.686622435540882);
# vr
p3=(-58.5310632406460 -58.7551276894428 -59.4209119275157 -59.5340832287973 -59.0820172574054 -58.4816156403679 -58.4393209995843 -58.1268235352513 -59.7521199808495 -59.9541491530508 -59.1148070247399 -59.6051172909600 -59.1602652733878 -59.1296527335030 -58.4072116875553 -58.1381073668658 -58.6890339997072 -58.7078566377084 -58.5310632406460 -58.9399220659293);
# vt
p4=(-43.5168318312975 -43.0836617911259 -38.6035633129534 -43.4727733091213 -43.6590460874390 -40.9758093794896 -42.8301048823357 -40.2764648082538 -41.8451836897609 -41.3365693308326 -38.9482314109285 -38.8408595770170 -43.2037684644403 -40.2984287743367 -40.1841850594734 -37.6044446131173 -41.3801869539536 -42.6876295787373 -43.5168318312975 -40.2215022532871);
# a
p5=(0.00482117633907524 0.00683108146798206 0.00529363206817247 0.00872130533677901 0.00463720403106396 0.00444715115481106 0.00573534887112704 0.000401073917243676 0.000121715120095330 0.00949185558441969 0.000925444985578218 0.00256814673416997 0.00753435323967846 0.00174503941464005 0.000104935267189865 0.00631875656798371 0.00975608516553863 0.00206670282298386 0.00482117633907524 0.00208800020769665);
# b
p6=(11.6887397176207 57.8741657017868 83.2842254607765 11.0749316614536 68.8842471095765 57.0076056437178 46.2984252761491 31.6357385832775 1.03246403977743 9.45088733479189 43.7647020602253 55.4976924703996 88.8077035167208 70.3296609532294 55.9121269117802 97.3874796926886 11.3448577842820 32.4833702738759 11.6887397176207 77.6356172437058);
# vpeak
p7=(11.4825800307907 11.5245912206127 11.0461156171401 10.9309617426427 11.5227444737994 12.3131444997519 12.0526157792961 12.0838675763739 10.4623757622469 10.6231719227618 11.0940060196167 11.3762213397537 11.8258859484417 11.4870233276891 11.6054980913438 11.9067725939547 12.1592159408815 11.7388570003550 11.4825800307907 11.7335579707683);
# vmin; c
p8=(-49.5218067494078 -49.0277808526367 -50.1912124134346 -50.4886791754197 -49.5587656397550 -48.7311642491461 -49.1894663801254 -48.4674491976019 -50.4408639425300 -50.3224153797575 -49.5998469108468 -50.2584270895847 -49.6164270551210 -49.7988664642538 -49.3624672105894 -48.8847011972767 -49.2187953711243 -49.2310330204958 -49.5218067494078 -49.1636860786970);
# d
p9=(3 153 525 657 851 -20 202 538 492 -46 201 828 452 -50 198 -24 68 -41 3 -82);

dir=$PWD;

i=0;
for r in ${p1[@]};
do
	cd $dir &&
	make clean && make && \
	./iz_fp_eval ${p1[i]} ${p2[i]} ${p3[i]} ${p4[i]} ${p5[i]} ${p6[i]} ${p7[i]} ${p8[i]} ${p9[i]} &&
	cd scripts &&
	matlab -nodisplay -r "plot_results '../results/n_MEC_LII_Stellate.dat' 'r$i' ; exit";
	((i=i+1));
done